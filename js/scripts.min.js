document.addEventListener("DOMContentLoaded", () => {
  const hamb = document.getElementById("hamburger-btn");
  const menu = document.getElementById("main-menu");
  const contrasteBtn = document.getElementById("contraste-btn");
  const chave = "modoContraste";

  /* MENU MOBILE */
  function ajustarMenu() {
    if (!menu) return;
    if (window.innerWidth <= 768) {
      menu.classList.remove("mobile-open");
      menu.style.display = "none";
    } else {
      menu.style.display = "flex";
    }
  }

  function alternarMenu(e) {
    if (!menu) return;
    e.stopPropagation();
    const ativo = menu.classList.toggle("mobile-open");
    menu.style.display = ativo ? "flex" : "none";
  }

  function fecharMenu(e) {
    if (!menu || !hamb) return;
    if (
      window.innerWidth <= 768 &&
      !menu.contains(e.target) &&
      !hamb.contains(e.target)
    ) {
      menu.classList.remove("mobile-open");
      menu.style.display = "none";
    }
  }
  if (localStorage.getItem(chave) === "true") {
    document.documentElement.classList.add("alto-contraste");
  }

  if (contrasteBtn) {
    contrasteBtn.addEventListener("click", () => {
      const ativo = document.documentElement.classList.toggle("alto-contraste");
      localStorage.setItem(chave, ativo ? "true" : "false");
    });
  }

  if (hamb && menu) {
    hamb.addEventListener("click", alternarMenu);
    document.addEventListener("click", fecharMenu);
    window.addEventListener("resize", ajustarMenu);
    ajustarMenu();
  }
});
